@using translord.Enums
@using translord.Manager.Models
@inject ITranslator Translator
@implements IDialogContentComponent<GroupedTranslations>

<FluentDialogBody>
    <div>
        @if (IsAddingNewLabel)
        {
            <FluentTextField @bind-Value="@Content.Key" Label="Key"></FluentTextField>
        }
        else
        {
            <span>@Content.Key</span>
        }
        <br/>
        <b>Translations:</b>
        <br/>
        @foreach (var lang in Translator.GetSupportedLanguages())
        {
            <FluentTextField @bind-Value="@Content.Translations.Find(x => x.Language == lang)!.Value" Label="@lang.GetName()"></FluentTextField>
        }
    </div>
</FluentDialogBody>

@code {
    [Parameter]
    public GroupedTranslations Content { get; set; } = default!;

    public bool IsAddingNewLabel { get; private set; }
    
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        IsAddingNewLabel = string.IsNullOrEmpty(Content.Key);
    }
}